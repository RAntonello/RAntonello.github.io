<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Scheduled Jobs (cronjobs)</title>
<link rel="stylesheet" href="/Users/justin/Documents/DadaMail/build/tmp/dada/extras/documentation/pod_source/pod_styles.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@osx004.apple.com" />
</head>

<body>



<ul id="index">
  <li><a href="#Scheduled-Jobs-for-Dada-Mail">Scheduled Jobs for Dada Mail</a>
    <ul>
      <li><a href="#Schedule-Flavor">Schedule Flavor</a></li>
      <li><a href="#Job-To-Run">Job To Run</a></li>
      <li><a href="#Mailing-List-to-Run">Mailing List to Run</a></li>
      <li><a href="#Job-Output">Job Output</a></li>
      <li><a href="#Running-the-scheduled-jobs-via-the-command-line">Running the scheduled jobs via the command line.</a></li>
    </ul>
  </li>
  <li><a href="#Retrieving-the-Cronjob">Retrieving the Cronjob</a></li>
</ul>

<h1 id="Scheduled-Jobs-for-Dada-Mail">Scheduled Jobs for Dada Mail</h1>

<p>Some of Dada Mail&#39;s more powerful features depend on a cronjob to be run on a periodic schedule.</p>

<p>Only one cronjob is required for all scheduled tasks in Dada Mail. It is composed of a URL that will need to be accessed.</p>

<p>Here&#39;s an exmaple:</p>

<p><a href="http://example.com/cgi-bin/dada/mail.cgi/_sched513A3F128C5C41EC/_all/_all/_silent/">http://example.com/cgi-bin/dada/mail.cgi/_sched513A3F128C5C41EC/_all/_all/_silent/</a></p>

<p><code>http://example.com/cgi-bin/dada/mail.cgi</code> is just the URL to your Dada Mail,</p>

<p>A full cronjob would look like this:</p>

<pre><code>    */5 * * * * /usr/bin/curl --user-agent &quot;Mozilla/5.0 (compatible;)&quot; --silent --get --url http://example.com/cgi-bin/dada/mail.cgi/_sched513A3F128C5C41EC/_all/_all/_silent/</code></pre>

<p><code>*/5 * * * * </code> sets the schedule to run this job every 5 minutes,</p>

<p><code>/usr/bin/curl --user-agent &quot;Mozilla/5.0 (compatible;)&quot; --silent --get --url</code> is the curl command, with different paramaters passed to grab the URL and,</p>

<p><code>http://example.com/cgi-bin/dada/mail.cgi/_sched513A3F128C5C41EC/_all/_all/_silent/</code></p>

<p>is the URL we want to grab.</p>

<h2 id="Schedule-Flavor">Schedule Flavor</h2>

<p><code>_sched513A3F128C5C41EC</code> is an individual <b>flavor</b> for our specific install of Dada Mail. It&#39;s meant to be somewhat unique, so that someone nefarious doesn&#39;t start running all the schedules for all Dada Mail installations it can find.</p>

<p>This flavor can be set when installing Dada Mail via the Dada Mail Installer. It can also be set manually in your <code>.dada_config</code> file, in the <code>SCHEDULED_JOBS_OPTIONS</code> hashref. Look for the <code>scheduled_jobs_flavor</code> paramater.</p>

<p>If you would like to customize the Schedule Flavor, the value of this paramater should only contain letters, numbers and underscores. Anything too tricky will foil the run mode dispatch code of Dada Mail. This value should also NOT be the same as an already-existing flavor/run mode</p>

<h2 id="Job-To-Run">Job To Run</h2>

<p>The next value in the path, <code>_all</code> describes which jobs to run. <code>_all</code> is special: it runs all the jobs can be run.</p>

<p>You can also modify this to run a specific job. The following are also supported:</p>

<ul>

<li><p>mass_mailing_monitor</p>

<p>Checks up on the status and health of any mass mailings currently going out. This used to be the job (prior to v8) of the Mailing Monitor plugin</p>

</li>
<li><p>scheduled_mass_mailings</p>

<p>This job checks to see if any mass mailings that are run at a schedule time need to go out.</p>

</li>
<li><p>bridge</p>

<p>This job runs jobs for the Bridge plugin. This be to check for any awaiting discussion messages that are awaiting to be sent out, or if a digest message should be created and sent.</p>

</li>
<li><p>bounce_handler</p>

<p>This job runs the Bounce Handler, which checks the bounce handler&#39;s email account for any awaiting bounced messages to process.</p>

</li>
</ul>

<h2 id="Mailing-List-to-Run">Mailing List to Run</h2>

<p>The next value in the path, <code>_all</code> (and then second <code>_all</code> found) describes which list to run jobs for. <code>_all</code> is specially, as it will run jobs for all the mailing lists you have. If you would like to run jobs for just one mailing list, you can change this paramater the list short name of that list.</p>

<h2 id="Job-Output">Job Output</h2>

<p>By Default, this is set to, <code>_verbose</code> which will print out the output for all the jobs run. If you would like to suppress this, you can, by setting this to, <code>_silent</code>.</p>

<p>Another option is to supress the output in the cronjob itself, like this:</p>

<p>*/5 * * * * /usr/bin/curl --user-agent &quot;Mozilla/5.0 (compatible;)&quot; --silent --get --url http://example.com/cgi-bin/dada/mail.cgi/_sched513A3F128C5C41EC/_all/_all/_verbose/ &gt;/dev/null 2&gt;&amp;1</p>

<h2 id="Running-the-scheduled-jobs-via-the-command-line">Running the scheduled jobs via the command line.</h2>

<p>There&#39;s no special command-line way to run these jobs, although you can invoke Dada Mail on the command line easy enough. The following:</p>

<pre><code>    cd /home/youraccount/public_html/cgi-bin/dada; /usr/bin/perl ./mail.cgi flavor=_sched513A3F128C5C41EC schedule=_all list=_all output_mode=_verbose</code></pre>

<p>Will do the same thing, as our initial example for curl.</p>

<h1 id="Retrieving-the-Cronjob">Retrieving the Cronjob</h1>

<p>If you need to access the scheduled job URL again, log into Control Panel Settings (any list will do) and go to, <b>Control Panel Settings- Scheduled Job</b></p>


</body>

</html>


