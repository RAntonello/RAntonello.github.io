<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Bridge - Discussion Lists and Email Sending from your Mail Reader</title>
<link rel="stylesheet" href="/Users/justin/Documents/DadaMail/build/tmp/dada/extras/documentation/pod_source/pod_styles.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@osx004.apple.com" />
</head>

<body>



<ul id="index">
  <li><a href="#Bridge">Bridge</a>
    <ul>
      <li><a href="#How-Bridge-Works">How Bridge Works</a></li>
    </ul>
  </li>
  <li><a href="#User-Guide">User Guide</a></li>
  <li><a href="#Obtaining-The-Plugin">Obtaining The Plugin</a></li>
  <li><a href="#Installation">Installation</a></li>
  <li><a href="#Mailing-List-Configuration">Mailing List Configuration</a>
    <ul>
      <li><a href="#Enable-Bridge">Enable Bridge</a></li>
      <li><a href="#Create-and-Configure-the-List-Email">Create and Configure the List Email</a>
        <ul>
          <li><a href="#Setup-As:-POP3-Account">Setup As: POP3 Account</a></li>
          <li><a href="#Setup-As:-Mail-Forward">Setup As: Mail Forward</a></li>
        </ul>
      </li>
      <li><a href="#Cronjob">Cronjob</a></li>
      <li><a href="#DMARC-Policies-and-Bridge">DMARC Policies and Bridge</a></li>
      <li><a href="#Testing-Bridge">Testing Bridge</a></li>
      <li><a href="#Additional-Mailing-List-Configuration">Additional Mailing List Configuration</a></li>
    </ul>
  </li>
  <li><a href="#Advanced-Topics">Advanced Topics</a></li>
  <li><a href="#Plugin-Configuration-Settings">Plugin Configuration Settings</a>
    <ul>
      <li><a href="#Plugin_Name">Plugin_Name</a></li>
      <li><a href="#MessagesAtOnce">MessagesAtOnce</a></li>
      <li><a href="#Allow_Open_Discussion_List">Allow_Open_Discussion_List</a></li>
      <li><a href="#Room_For_One_More_Check">Room_For_One_More_Check</a></li>
      <li><a href="#Enable_POP3_File_Locking">Enable_POP3_File_Locking</a></li>
      <li><a href="#Check_List_Owner_Return_Path_Header">Check_List_Owner_Return_Path_Header</a></li>
      <li><a href="#Check_Multiple_Return_Path_Headers">Check_Multiple_Return_Path_Headers</a></li>
    </ul>
  </li>
  <li><a href="#Debugging">Debugging</a>
    <ul>
      <li><a href="#Debugging-your-POP3-account-information">Debugging your POP3 account information</a></li>
    </ul>
  </li>
  <li><a href="#COPYRIGHT">COPYRIGHT</a></li>
  <li><a href="#LICENSE">LICENSE</a></li>
</ul>

<h1 id="Bridge">Bridge</h1>

<p>Bridge connects your mail reader with Dada Mail, allowing you to send both announce-only messages from your mail reader as well as enabling discussion mailing lists, where each member of your mailing list may send messages out which will then be sent to the entire mailing list.</p>



<iframe width="640" height="360" src="https://www.youtube.com/embed/gaqVVOURtuI?rel=0" frameborder="0" allowfullscreen></iframe>

<h2 id="How-Bridge-Works">How Bridge Works</h2>

<p>Messages are received by sending these messages to the <b>List Email</b>, which you will have to set up separately to this plugin.</p>

<p>The List Email can be either a regular <b>POP3 email account</b>, which Bridge will log into on a schedule (cronjob), or an <b>Email Forward</b>, which will forward the message directly to the Bridge.</p>

<h1 id="User-Guide">User Guide</h1>

<p>The below documentation goes into detail on how to <i>install</i> and <i>configure</i> Bridge. A user guide for Bridge is available in the Dada Mail Manual chapter, <b>Using Bridge</b>:</p>

<p><a href="http://dadamailproject.com/pro_dada/using_bridge.html">http://dadamailproject.com/pro_dada/using_bridge.html</a></p>

<p>For more information on Pro Dada/Dada Mail Manual:</p>

<p><a href="http://dadamailproject.com/purchase/pro.html">http://dadamailproject.com/purchase/pro.html</a></p>

<h1 id="Obtaining-The-Plugin">Obtaining The Plugin</h1>

<p>Bridge is located in the, <i>dada/plugins</i> directory of the Dada Mail distribution, under the name: <i>bridge</i></p>

<h1 id="Installation">Installation</h1>

<p>Bridge can be installed using the included installer that comes with Dada Mail. In the Installer look under, <b>Plugins/Extensions </b> and check <b>Bridge</b>.</p>

<h1 id="Mailing-List-Configuration">Mailing List Configuration</h1>

<p>Once you&#39;ve installed Bridge, you may access it via the List Control Panel. Bridge can be accessed via the admin menu under, <b>Plugins/Extensions - Discussion Lists</b></p>

<p>Before you can start using Bridge for your mailing list, there&#39;s two things that you will need to do for each mailing list you would like to use Bridge for:</p>

<ul>

<li><p>Enable Bridge</p>

</li>
<li><p>Create and Configure the List Email</p>

</li>
</ul>

<h2 id="Enable-Bridge">Enable Bridge</h2>

<p>In Bridge&#39;s control panel, under, <b>General</b>, uncheck the option: <b>Disable Bridge</b>. Save your changes.</p>

<h2 id="Create-and-Configure-the-List-Email">Create and Configure the List Email</h2>

<p>The <b>List Email</b> is the address that you will be sending your email messages to for them to be broadcasted to your entire mailing list.</p>

<p>There&#39;s a few constraints you want to keep in mind when creating the List Email. Most likely, the address is going to be on the same domain that you install Dada Mail and it&#39;s going to be an address that you&#39;re not already using; either somewhere else in Dada Mail, or as another general email address.</p>

<p>The List Email can either be a normal <b>POP3 Email Account</b>, or a <b>Mail Forward</b>.</p>

<p>A <b>POP3 account</b> is fairly easy to set up and Bridge basically acts as a mail reader: Bridge will log in via POP3, check any messages that may be available, process them, then delete them when they&#39;ve been read.</p>

<p>A <b>Mail Forward</b> may be slightly trickier to set up, but messages will br processed much quicker, as it&#39;s not waiting for the schedule to run, as you do, with a POP3 setup.</p>

<p>Before attempting, make sure that you can set up a mail forward that can <b>Pipe to a Program</b>, and not simply forward to another email address.</p>

<h3 id="Setup-As:-POP3-Account">Setup As: POP3 Account</h3>

<p>Toggle the radio buttons labeled, <b>Setup As</b> to, <b>POP3 Account</b>.</p>

<p>Create a new POP3 Account. This email account will be the email address you will send messages to. Additional fields should be shown, where you may plug in the POP3 Login information for this email address ( POP3 Server, POP3 Username, POP3 Password, etc.). You may test that the login credentials are working by clicking the button labeled, <b>Test POP3 Login Information...</b>.</p>

<p>Once the login information works with Bridge, Save your changes.</p>

<h3 id="Setup-As:-Mail-Forward">Setup As: Mail Forward</h3>

<p>Toggle the radio buttons labeled, <b>Setup As</b> to, <b>Email Forward</b>. An <i>example</i> of the command you&#39;ll need to work with Bridge will be shown.</p>

<p>Create a new Mail Forward, and use the example shown as a starting point for the piped command. Here&#39;s an example,</p>

<pre><code> |/home/youraccount/public_html/cgi-bin/dada/mail.cgi --inject --list yourlist</code></pre>

<p>If you&#39;re setting the command in cPanel (or something similar) and it asks you to, &quot;<i>enter a path relative to your home directory</i>&quot;, you may need to simply remove the <b>Pipe Character</b> (<b>|</b>) and the path to your home directory <i>/home/youraccount</i>, and plugging in this instead:</p>

<pre><code>    public_html/cgi-bin/dada/mail.cgi --inject --list yourlist</code></pre>

<h2 id="Cronjob">Cronjob</h2>

<p>Bridge runs in the background on a schedule. Make sure to set Dada Mail&#39;s cronjob:</p>

<p><a href="http://dadamailproject.com/d/features-scheduled_cronjobs.pod.html">http://dadamailproject.com/d/features-scheduled_cronjobs.pod.html</a></p>

<h2 id="DMARC-Policies-and-Bridge">DMARC Policies and Bridge</h2>

<p>Bridge has a very important option labeled, <b>Send messages, &quot;On Behalf Of&quot; (p.p. mode) </b>. If you are running a discussion list, you will want this option checked, to make sure mail delivery works.</p>

<p>This feature was introduced in v7.3.0 of Dada Mail and has been refined since. If you&#39;re running a version of Dada Mail below v7.3.0 and are running a discussion list, it&#39;s important to upgrade to make sure your discussion list is running correctly.</p>

<h2 id="Testing-Bridge">Testing Bridge</h2>

<p>Once you&#39;ve enabled Bridge, and have set up the List Email, it&#39;s time to test the plugin. Simply send a message to your List Email. To make things easier, make sure to send the message from the List Owner&#39;s email address, which is allowed to send to both announce-only and discussion type mailing lists. If a message is sent out to your entire mailing list, congratulations: Bridge is working.</p>

<h2 id="Additional-Mailing-List-Configuration">Additional Mailing List Configuration</h2>

<p>In Bridge&#39;s List Control Panel and below, <b>List Email Configuration</b> section, there are additional settings you may customize, depending on how you&#39;d like your mailing list to function.</p>

<h1 id="Advanced-Topics">Advanced Topics</h1>

<h1 id="Plugin-Configuration-Settings">Plugin Configuration Settings</h1>

<p>The below settings are available to you, if you wish to further configure Bridge. These settings can be configured inside your <code>.dada_config</code> file.</p>

<p>First, search and see if the following lines are present in your <code>.dada_config</code> file:</p>

<pre><code> # start cut for plugin configs
 =cut

 =cut
 # end cut for plugin configs</code></pre>

<p>If they are present, remove them.</p>

<p>You can then configure the plugin variables on these lines:</p>

<pre><code>        Bridge =&gt; {
        
                Plugin_Name                         =&gt; undef,
                MessagesAtOnce                      =&gt; undef,
                Allow_Open_Discussion_List          =&gt; undef,
                Room_For_One_More_Check             =&gt; undef,
                Enable_POP3_File_Locking            =&gt; undef,
                Check_List_Owner_Return_Path_Header =&gt; undef,
                Check_Multiple_Return_Path_Headers  =&gt; undef,
        
        },</code></pre>

<h2 id="Plugin_Name">Plugin_Name</h2>

<p>The name of the plugin. By default, <b>Bridge</b>.</p>

<h2 id="MessagesAtOnce">MessagesAtOnce</h2>

<p>You can specify how many messages you want to have the program actually handle per execution of the script by changing the, <code>MessagesAtOnce</code> variable. By default, it&#39;s set conservatively to, <code>1</code>.</p>

<h2 id="Allow_Open_Discussion_List">Allow_Open_Discussion_List</h2>

<p>If set to, <code>1</code> a new option will be available in Bridge&#39;s list control panel to allow you to have a discussion list that anyone can send messages to.</p>

<h2 id="Room_For_One_More_Check">Room_For_One_More_Check</h2>

<p><code>Room_For_One_More_Check</code> looks to see how many mass mailings are currently in the mass mailing queue. If its at or above the limit set in <code>$MAILOUT_AT_ONCE_LIMIT</code>, Bridge will not attempt to look for and (possibly) create another mass mailing to join the queue.</p>

<h2 id="Enable_POP3_File_Locking">Enable_POP3_File_Locking</h2>

<p>When set to, <code>1</code>, Bridge will use a simple lockfile scheme to make sure that it does not check the same POP3 account at the same time another copy of the plugin is doing the exact same thing, saving you from potentially sending out multiple copies of the same message.</p>

<p>Sometimes, the simple POPp3 lock in Dada Mail gets stale, and a deadlock happens. Setting this configuration to, <code>0</code> disables lockfiles. Stale locks will be deleted by the app after a day of being stale.</p>

<h2 id="Check_List_Owner_Return_Path_Header">Check_List_Owner_Return_Path_Header</h2>

<p>When testing the validity of a received message, Dada Mail will look to see if the, <code>Return-Path</code> header matches what&#39;s set in the, <code>From</code> header. If they do not match, this test fails and the message will be rejected. Setting, <code>Check_List_Owner_Return_Path_Header</code> to, <code>0</code> will disable this test.</p>

<h2 id="Check_Multiple_Return_Path_Headers">Check_Multiple_Return_Path_Headers</h2>

<p><code>Check_Multiple_Return_Path_Headers</code> is another validity test for received messages. This time, the message is looked to see if it has more than one <code>Return-Path</code> header. If it does, it is rejected. If you set, <code>Check_Multiple_Return_Path_Headers</code> to, <code>0</code>, this test will be disabled.</p>

<h1 id="Debugging">Debugging</h1>

<h2 id="Debugging-your-POP3-account-information">Debugging your POP3 account information</h2>

<p>The easiest way to debug your POP3 account info is to actually test it out.</p>

<p>Try logging into your List Email, via the command line:</p>

<pre><code>     prompt:]telnet pop3.example.com 110
     Trying 12.123.123.123...
     Connected to pop3.example.com.
     Escape character is &#39;^]&#39;.
     +OK &lt;37892.1178250885@hedwig.summersault.com&gt;
     user user%example.com
     +OK 
     pass sneaky
     +OK 
     list</code></pre>

<p>In the above example, <b>pop3.example.com</b> is your POP3 server. You&#39;ll be typing in:</p>

<pre><code>  user user%example.com</code></pre>

<p>and:</p>

<pre><code>  pass sneaky</code></pre>

<p>(changing them to their real values) when prompted. This is basically what bridge does itself.</p>

<p>If you don&#39;t have command line access, try adding an account in a desktop mail reader. If these credentials work there, they&#39;ll most likely work for Bridge.</p>

<p>If your account information is correct and also logs in when you test the pop3 login information through bridge yourself, check to see if there isn&#39;t an email filter attached the account that looks at messages before they&#39;re delivered to the POP3 Mailbox and outright deletes messages because it triggered a flag.</p>

<p>This could be the cause of mysterious occurences of messages never reaching the POP3 Mailbox.</p>

<h1 id="COPYRIGHT">COPYRIGHT</h1>

<p>Copyright (c) 1999 - 2016 Justin Simoni All rights reserved.</p>

<h1 id="LICENSE">LICENSE</h1>

<p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p>

<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>

<p>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.</p>


</body>

</html>


