<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Dada Mail File Formats</title>
<link rel="stylesheet" href="/Users/justin/Documents/DadaMail/build/tmp/dada/extras/documentation/pod_source/pod_styles.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@osx004.apple.com" />
</head>

<body>



<ul id="index">
  <li>
    <ul>
      <li><a href="#Dada-Mail-Specific-File-Formats">Dada Mail Specific File Formats</a></li>
      <li><a href="#List-Subscribers">List Subscribers</a></li>
      <li><a href="#Postgres">Postgres</a></li>
      <li><a href="#MySQL">MySQL</a></li>
      <li><a href="#See-Also">See Also:</a></li>
      <li><a href="#List-Settings">List Settings</a></li>
      <li><a href="#Postgres1">Postgres</a></li>
      <li><a href="#MySQL1">MySQL</a></li>
      <li><a href="#Message-Archives">Message Archives</a></li>
      <li><a href="#Postgres2">Postgres</a></li>
      <li><a href="#MySQL2">MySQL</a></li>
      <li><a href="#Backups">Backups</a></li>
      <li><a href="#Usage-Logs">Usage Logs</a></li>
      <li><a href="#Error-Logs">Error Logs</a></li>
      <li><a href="#Session-Information">Session Information</a></li>
      <li><a href="#See-Also1">See Also:</a></li>
    </ul>
  </li>
</ul>

<h2 id="Dada-Mail-Specific-File-Formats">Dada Mail Specific File Formats</h2>

<p>The File Formats for much of Dada Mail&#39;s list settings, archives, etc are very basic. Having other programs read the information and use it should be relatively easy.</p>

<h2 id="List-Subscribers">List Subscribers</h2>

<p>Currently, Dada Mail is shipped with support for three different types of backends for the subscription list. They are:</p>

<h2 id="Postgres">Postgres</h2>

<p>Dada Mail also supports a Postgres based subscription list backend.</p>

<p>The specific table schema is described in the <i>dada/extras/SQL/dada_subscribers.sql</i> file in the Dada Mail distribution.</p>

<ul>

<li><p>email_id</p>

<p>is an auto-generated ID number</p>

</li>
<li><p>email</p>

<p>Holds the actual email address</p>

</li>
<li><p>list</p>

<p>Holds the listshortname the email address is subscribed to</p>

</li>
<li><p>list_type</p>

<p>Holds either, <i>list</i>, <i>black_list</i> or &lt;invitelist&gt; (see the PlainText docs above)</p>

</li>
<li><p>list_status</p>

<p>Almost always is set to, <b>1</b>. Setting it to something else won&#39;t have an affect you may intend.</p>

</li>
</ul>

<h2 id="MySQL">MySQL</h2>

<p>Dada Mail also supports a MySQL based subscription list backend.</p>

<p>The specific table schema is described in the <i>ada/extras/SQL/dada_subscribers.mysql</i> file in the Dada Mail distribution.</p>

<p>The fields in the schema play the same role as what&#39;s described for Postgres, although their structure is slightly different, given the differences of the two SQL products.</p>

<h2 id="See-Also">See Also:</h2>

<ul>

<li><p>DADA::MailingList::Subscribers</p>

<p><a href="MailingList_Subscribers.pm.html">MailingList_Subscribers.pm.html</a></p>

</li>
</ul>

<h2 id="List-Settings">List Settings</h2>

<p>Currently, Dada Mail is shipped with support for three different types of backends for the List Settings. They are:</p>

<h2 id="Postgres1">Postgres</h2>

<p>Dada Mail also supports a Postgres based list settings backend.</p>

<p>The specific table schema is described in the <i>dada/extras/SQL/dada_settings.sql</i> file in the Dada Mail distribution.</p>

<ul>

<li><p>list</p>

<p>The list shortname associated with the list setting.</p>

</li>
<li><p>setting</p>

<p>The Name of the list setting</p>

</li>
<li><p>value the value of the list setting</p>

</li>
</ul>

<h2 id="MySQL1">MySQL</h2>

<p>Dada Mail also supports a MySQL based list settings backend.</p>

<p>The specific table schema is described in the <i>ada/extras/SQL/dada_settings.mysql</i> file in the Dada Mail distribution.</p>

<p>The fields in the schema play the same role as what&#39;s described for Postgres, although their structure is slightly different, given the differences of the two SQL products.</p>

<p>See Also:</p>

<ul>

<li><p>DADA::MailingList::Settings</p>

<p><a href="MailingList_Settings.pm.html">MailingList_Settings.pm.html</a></p>

</li>
<li><p>DADA::MailingList::Settings::Db</p>

<p><a href="MailingList_Settings_Db.pm.html">MailingList_Settings_Db.pm.html</a></p>

</li>
<li><p>DADA::MailingList::Settings::baseSQL</p>

<p><a href="MailingList_Settings_baseSQL.pm.html">MailingList_Settings_baseSQL.pm.html</a></p>

</li>
<li><p>DADA::MailingList::Settings::MySQL</p>

<p><a href="MailingList_Settings_MySQL.pm.html">MailingList_Settings_MySQL.pm.html</a></p>

</li>
</ul>

<h2 id="Message-Archives">Message Archives</h2>

<p>Currently, Dada Mail is shipped with support for three different types of backends for the message archives. They are:</p>

<h2 id="Postgres2">Postgres</h2>

<p>Dada Mail also supports a Postgres based archive backend.</p>

<p>The specific table schema is described in the <i>dada/extras/SQL/dada_archives.sql</i> file in the Dada Mail distribution.</p>

<ul>

<li><p>list</p>

<p>The list shortname associated with the archived message.</p>

</li>
<li><p>archive_id</p>

<p>Similar to the keys of the DBM-based backend.</p>

</li>
<li><p>subject</p>

<p>The Subject of the message. This field is not necessarily filled in as the, <b>raw_msg</b> contains this information as well. Part of the table for backwards-compatibility.</p>

</li>
<li><p>message</p>

<p>A simplified version of the Message Body. Not necessarilly filled in, as the <b>raw_msg</b> field contains this information as well. Part of the table for backwards-compatibility</p>

</li>
<li><p>format</p>

<p>A simplified version of the Message Content-Type. Not necessarilly filled in, as the <b>raw_msg</b> field contains this information as well. Part of the table for backwards compatibility.</p>

</li>
<li><p>raw_msg</p>

<p>Containts the complete email message, including the email message headers.</p>

</li>
</ul>

<p>A main advantage of using the SQL-based backend is that it suffers from almost none of the shortcomings of the DBM-based backend, save for the message-id collision problem.</p>

<h2 id="MySQL2">MySQL</h2>

<p>Dada Mail also supports a MySQL based archive backend.</p>

<p>The specific table schema is described in the <i>ada/extras/SQL/dada_archives.mysql</i> file in the Dada Mail distribution.</p>

<p>The fields in the schema play the same role as what&#39;s described for Postgres, although their structure is slightly different, given the differences of the two SQL products.</p>

<p>See Also:</p>

<ul>

<li><p>DADA::MailingList::Archives</p>

<p><a href="MailingList_Archives.pm.html">MailingList_Archives.pm.html</a></p>

</li>
<li><p>DADA::MailingList::Archives::Db</p>

<p><a href="MailingList_Archives_Db.pm.html">MailingList_Archives_Db.pm.html</a></p>

</li>
<li><p>DADA::MailingList::Archives::baseSQL</p>

<p><a href="MailingList_Archives_baseSQL.pm.html">MailingList_Archives_baseSQL.pm.html</a></p>

</li>
<li><p>DADA::MailingList::Archives::MySQL</p>

<p><a href="MailingList_Archives_MySQL.pm.html">MailingList_Archives_MySQL.pm.html</a></p>

</li>
<li><p>DADA::MailingList::Archives::PostgreSQL</p>

<p><a href="MailingList_Archives_PostgreSQL.pm.html">MailingList_Archives_PostgreSQL.pm.html</a></p>

</li>
</ul>

<h2 id="Backups">Backups</h2>

<p>By default, automated backups are created for the List Settings, Archives and Schedules backends.</p>

<p>The List Settings are automatically backed up if the backend is the DBM file.</p>

<p>The List Archives are automatically backed up if the backend is the DBM file.</p>

<p>The List Schedules are automatically backed up if the backend is the DBM file.</p>

<p>Backups are not made for the subscription lists.</p>

<p>Backups are not made for any of the SQL backends.</p>

<p>The backups are file-based and OS platform neutral.</p>

<p>By default, these backups are stored in the directory set in the Config.pm variable, <b>$BACKUPS</b>. If this variable isn&#39;t explicitly set, the directory set in the <b>$FILES</b> variable is used.</p>

<p>The format seems complex at first, but is really quite simple:</p>

<p>Each list has its own directory, named after the <b>list&#39;s short name</b>. The contents of this directory will be three other directories, named, <b>archives</b>, <b>schedules</b> and <b>settings</b> - named appropriately for what information they save.</p>

<p>Contained in any one of those directories is a list of more directories, named after the UNIX time() they were created.</p>

<p>In any one of these directories is a list of files. Each file is named after the name of the key and its contents are the values from that key.</p>

<p>You can reload/reset your list archives/schedules/settings by visiting the following URL in your web browser:</p>

<p>http://example.com/cgi-bin/dada/mail.cgi?flavor=restore_lists</p>

<p>Where, <b>http://example.com/cgi-bin/dada/mail.cgi</b></p>

<p>Is the URL of your Dada Mail installation.</p>

<p>For more information, see the dada/DADA/App/GenericDBFile/Backup.pm Perl module.</p>

<p>You can set how many copies of backups you&#39;d like to save in the Config.pm variable, %<b>BACKUP_HISTORY</b></p>

<p>global_variables.pod.html#_backup_history</p>

<h2 id="Usage-Logs">Usage Logs</h2>

<p>The Dada Mail usage logs are saved wherever you&#39;ve set the Config.pm variable, <b>$PROGRAM_USAGE_LOG</b></p>

<p>The format is fairly free-form, but does follow some conventions, for example (Instead of newlines, tabs are used):</p>

<pre><code> [Tue Jan 16 22:07:54 2007]
 listshortname
 127.0.0.1
 Subscribed to dadatest.list
 email1@example.com</code></pre>

<p><b>[Tue Jan 16 22:07:54 2007]</b> Apache-style date of the action</p>

<p><b>listshortname</b> the list&#39;s shortname of the list being worked with</p>

<p><b>127.0.0.1</b> the IP Address that the action was started by</p>

<p><b>Subscribed to dadatest.list</b> the action itself</p>

<p><b>email1@example.com</b> More information about the action, in this case, the email subscribed.</p>

<p>For more information:</p>

<p><a href="Logging_Usage.pm.html">Logging_Usage.pm.html</a></p>

<h2 id="Error-Logs">Error Logs</h2>

<p>The Dada Mail error logs are saved whereer you&#39;ve set the Config.pm variable, <b>$PROGRAM_ERROR_LOG</b>.</p>

<p>The format is fairly free-form, but usualy has a Apache-style date stamp, followed by the error/warning reported by the program.</p>

<h2 id="Session-Information">Session Information</h2>

<p>Dada Mail has two methods it can use to keep state for administrative control panel sessions.</p>

<p>By default, it uses the CPAN CGI::Session module and supports the following CGI::Session backends:</p>

<ul>

<li><p>PlainText</p>

</li>
<li><p>Db (Berkeley DB File, in this case)</p>

</li>
<li><p>MySQL</p>

</li>
<li><p>PostgreSQL</p>

</li>
</ul>

<p>The other method is currently known as, &quot;Classic&quot; and is basically the system that was in place before we moved to the CGI::Session module.</p>

<p>This method using no temporary session keeping file, but rather keeps all information in the web browser&#39;s cookie. Because this information includes a password (encrypted), it&#39;s not suggested that you use this method, but it&#39;s there for backwards compatibility.</p>

<h2 id="See-Also1">See Also:</h2>

<ul>

<li><p>CGI::Session</p>

<p><a href="http://search.cpan.org/~markstos/CGI-Session/lib/CGI/Session.pm">http://search.cpan.org/~markstos/CGI-Session/lib/CGI/Session.pm</a></p>

</li>
<li><p>dada/DADA/App/Session.pm</p>

</li>
</ul>


</body>

</html>


