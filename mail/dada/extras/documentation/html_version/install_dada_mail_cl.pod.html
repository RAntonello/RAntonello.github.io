<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Install Dada Mail, Command Line Interface</title>
<link rel="stylesheet" href="/Users/justin/Documents/DadaMail/build/tmp/dada/extras/documentation/pod_source/pod_styles.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@osx004.apple.com" />
</head>

<body>



<ul id="index">
  <li><a href="#Dada-Mail-Installation-Configuration---Command-Line-Interface">Dada Mail Installation/Configuration - Command Line Interface</a></li>
  <li><a href="#Installing-Dada-Mail-via-the-CLI">Installing Dada Mail via the CLI</a>
    <ul>
      <li><a href="#Download-Dada-Mail">Download Dada Mail</a></li>
      <li><a href="#Uncompress-the-Distribution">Uncompress the Distribution</a></li>
    </ul>
  </li>
  <li><a href="#Introduction-to-the-Installation-Configuration-Process">Introduction to the Installation/Configuration Process</a></li>
  <li><a href="#Required-Paramaters">Required Paramaters</a>
    <ul>
      <li><a href="#dada_files_loc">--dada_files_loc</a></li>
      <li><a href="#program_url">--program_url</a></li>
      <li><a href="#dada_root_pass">--dada_root_pass</a></li>
      <li><a href="#support_files_dir_path---support_files_dir_url">--support_files_dir_path --support_files_dir_url</a></li>
      <li><a href="#backend">--backend</a></li>
    </ul>
  </li>
  <li><a href="#Optional-Paramaters">Optional Paramaters</a>
    <ul>
      <li><a href="#deployment_running_under">--deployment_running_under</a></li>
      <li><a href="#install_plugins">--install_plugins</a></li>
      <li><a href="#install_wysiwyg_editors">--install_wysiwyg_editors</a></li>
      <li><a href="#install_file_browser">--install_file_browser</a></li>
      <li><a href="#Amazon-SES">Amazon SES</a></li>
    </ul>
  </li>
  <li><a href="#Examples">Examples</a></li>
  <li><a href="#Upgrading">Upgrading</a></li>
  <li><a href="#Other-Paramaters">Other Paramaters</a>
    <ul>
      <li><a href="#help">--help</a></li>
    </ul>
  </li>
  <li><a href="#Bugs">Bugs</a></li>
</ul>

<h1 id="Dada-Mail-Installation-Configuration---Command-Line-Interface">Dada Mail Installation/Configuration - Command Line Interface</h1>

<p>Dada Mail is installed/configured using the included installer, either using the installer&#39;s web-based interface, or the command line interface.</p>

<p>The web-based interface works great if you are setting up and running Dada Mail in a CGI environment. Otherwise, you probably will want to use the command line interface.</p>

<h1 id="Installing-Dada-Mail-via-the-CLI">Installing Dada Mail via the CLI</h1>

<h2 id="Download-Dada-Mail">Download Dada Mail</h2>

<p>The latest version of Dada Mail will be listed on:</p>

<p><a href="http://dadamailproject.com/download">http://dadamailproject.com/download</a></p>

<p>if you are a Pro Dada subscription, you may download the most recent version of Pro Dada at:</p>

<p><a href="http://dadamailproject.com/pro_dada">http://dadamailproject.com/pro_dada</a></p>

<p>Copy the distribution to the directory you would like to install Dada Mail under.</p>

<h2 id="Uncompress-the-Distribution">Uncompress the Distribution</h2>

<p>Uncompress Dada Mail - this will create a new directory named <code>dada</code>. Change into this directory:</p>

<pre><code>    gunzip dada-9_1_3.tar.gz
    tar -xvf dada-9_1_3.tar
    cd dada</code></pre>

<p>In the <code>dada</code> directory, rename the, <code>installer-disabled</code> directory to simply, <code>install</code> and change into this directory. Once in the <code>installer</code> directory, change the permissions of the <code>install.cgi</code> script to, <code>755</code>:</p>

<pre><code>    mv installer-disabled installer
    cd installer
    chmod 755 install.cgi</code></pre>

<p>You&#39;re now ready to run the <code>install.cgi</code> install/configuration script.</p>

<p>To make sure permissions are set correctly, we suggest running the <code>install.cgi</code> script under the same owner as will run Dada Mail (or change the ownership of the files at a later on - just don&#39;t forget!)</p>

<h1 id="Introduction-to-the-Installation-Configuration-Process">Introduction to the Installation/Configuration Process</h1>

<p>The <code>install.cgi</code> script takes care of the following jobs:</p>

<ul>

<li><p>Creates the .dada_files directory structure</p>

<p>Dada Mail uses this directory structure to save it&#39;s configuration file, and keep its temporary files, among other things. If you use SQLite for your backend, the SQLite database will be saved here, as well.</p>

</li>
<li><p>Writes the .dada_config configuration file.</p>

<p>Dada Mail&#39;s global configuration file is called, <code>.dada_config</code> and is itself written in Perl. Any global changes you would like to make to Dada Mail should be made in this file. The global defaults are located in <code>dada/DADA/Config.pm</code>, it is not suggested that you make changes to this file.</p>

</li>
<li><p>Copies over static files</p>

<p>Dada Mail has a collection of static files that need to be copied over.</p>

<p>Static files include images, stylesheets and javascript files - some of these need extra configuration. Dada Mail keeps all of these files in a directory called <code>dada_mail_support_files</code>. The collection of these files will be copied from the, <code>dada/static</code> directory of the distribution.</p>

</li>
<li><p>Verifies configuration information</p>

<p>The installer will try to make sure that the information you submit is correct - files can be written where you ask them to be written, the database connection works, etc.</p>

</li>
</ul>

<p>The <code>install.cgi</code> script does not take care of any web server configuration. If you run Dada Mail under PSGI/Plack, you will need to configure your webserver (nginx, most likely) to run Dada Mail, once you start the PSGI process.</p>

<p>More on running Dada Mail under PSGI/Plack:</p>

<p><a href="http://dadamailproject.com/d/features-psgi_support.pod.html">http://dadamailproject.com/d/features-psgi_support.pod.html</a></p>

<h1 id="Required-Paramaters">Required Paramaters</h1>

<p>The following parameters are required, if you&#39;re <b>installing</b> Dada Mail. If you are <b>upgrading</b> Dada Mail, there are separate options to make things easier:</p>

<h2 id="dada_files_loc">--dada_files_loc</h2>

<p>Dada Mail needs a certain directory structure to keep its configuration files, temporary files, etc in. The top directory will be called, &quot;.dada_files&quot; and will need to be readable/writable to whatever process runs Dada Mail.</p>

<p>Set <code>--dada_files_loc</code> to the <b>parent</b> directory you would like the .dada_files directory to be created in.</p>

<h2 id="program_url">--program_url</h2>

<p>The URL that will be used to access Dada Mail.</p>

<h2 id="dada_root_pass">--dada_root_pass</h2>

<p>The Dada Mail Root Password you&#39;d like to use</p>

<h2 id="support_files_dir_path---support_files_dir_url">--support_files_dir_path --support_files_dir_url</h2>

<p>Dada Mail keeps its static files in a directory called, &quot;dada_mail_support_files&quot; (images/javascripts,etc). Set the parent directory this should be created in using these two parameters.</p>

<p><code>--support_files_dir_path</code> should contain the absolute server path to this directory</p>

<p><code>--support_files_dir_url</code> should contain the URL that maps to this directory</p>

<h2 id="backend">--backend</h2>

<p>The backend you&#39;d like to use. Can be set to use any of the following:</p>

<ul>

<li><p>mysql</p>

<p>Uses a MySQL database</p>

</li>
<li><p>Pg</p>

<p>Uses a PostgreSQL database</p>

</li>
<li><p>SQLite</p>

<p>Uses a SQLite database - good for testing/development, but most likely not something you want to use for production use.</p>

</li>
</ul>

<p>If you set, <code>--backend</code> to either, <code>mysql</code>, or, <code>Pg</code>, you will also have to pass the following parameters:</p>

<ul>

<li><p>--sql_server</p>

<p>The SQL server</p>

</li>
<li><p>--sql_port</p>

<p>SQL port - can be set to, &quot;auto&quot; to choose the default port for mysql and Pg</p>

</li>
<li><p>--sql_database</p>

<p>The name of your SQL database</p>

</li>
<li><p>--sql_username</p>

<p>Your SQL username</p>

</li>
<li><p>--sql_password</p>

<p>Your SQL password</p>

</li>
</ul>

<h1 id="Optional-Paramaters">Optional Paramaters</h1>

<h2 id="deployment_running_under">--deployment_running_under</h2>

<p>Dada Mail defaults to, &quot;CGI&quot;. Supported are the following:</p>

<ul>

<li><p>CGI</p>

<p>When running Dada Mail as a CGI scripts using something like Apache and mod_cgi, most likely in a shared hosting environment. This is the default configuration, so you will not need to pass this parameter if you would like to run under CGI.</p>

</li>
<li><p>FastCGI</p>

<p>This will set up Dada Mail to run as a FastCGI script using CGI::Fast. This would be useful if you&#39;re running under Apache, but would like to run Dada Mail as a FastCGI script using mod_fastcgi or mod_fcgi.</p>

<p>If you want to run Dada Mail under a reverse proxy, we&#39;d suggest instead using the PSGI deployment option instead</p>

</li>
<li><p>PSGI</p>

<p>Use this option to run Dada Mail under PSGI/Plack. Doing so will set up Dada Mail&#39;s own &quot;app.psgi&quot; script inside its &quot;dada&quot; directory, which you can then start up and utilize however you would like using the wonders of PSGI:</p>

<pre><code>    sudo plackup --port 9090 --host 127.0.0.1</code></pre>

</li>
</ul>

<h2 id="install_plugins">--install_plugins</h2>

<p>Takes a comma separated (no space between the comma) list of plugin/extension names.</p>

<p>The following plugins/extensions are supported:</p>

<ul>

<li><p>mailing_monitor</p>

</li>
<li><p>change_root_password</p>

</li>
<li><p>screen_cache</p>

</li>
<li><p>log_viewer</p>

</li>
<li><p>tracker</p>

</li>
<li><p>bridge</p>

</li>
<li><p>bounce_handler</p>

</li>
<li><p>change_list_shortname</p>

</li>
<li><p>password_protect_directories</p>

</li>
<li><p>multiple_subscribe</p>

</li>
<li><p>blog_index</p>

</li>
</ul>

<p>Example:</p>

<pre><code>        --install_plugins mailing_monitor,change_root_password,screen_cache</code></pre>

<p>This also works:</p>

<pre><code>        --install_plugins mailing_monitor --install_plugins change_root_password --install_plugins screen_cache</code></pre>

<h2 id="install_wysiwyg_editors">--install_wysiwyg_editors</h2>

<p>You may pass one of the following (or both), to setup and install the following WYSIWYG editors:</p>

<ul>

<li><p>ckeditor</p>

</li>
<li><p>tiny_mce</p>

</li>
</ul>

<p>Example:</p>

<pre><code>    --install_wysiwyg_editors ckeditor,tiny_mce</code></pre>

<h2 id="install_file_browser">--install_file_browser</h2>

<p>pass <b>either</b>, <code>kcfinder</code> to install the KCFinder File Browser, or pass, <code>core5_filemanager</code> to install the Core5 Filemanager.</p>

<p>Unlike the, <code>--install_wysiwyg_editors</code> option, <code>--install_file_browser</code> (and Dada Mail) only supports installing one file browser/manager at a time.</p>

<h2 id="Amazon-SES">Amazon SES</h2>

<p>Dada Mail supports Amazon SES to send messages out, sending verification email messages and to find out your sending stats and limitations. More information on Amazon SES support:</p>

<p><a href="http://dadamailproject.com/d/features-amazon_ses_support.pod.html">http://dadamailproject.com/d/features-amazon_ses_support.pod.html</a></p>

<p>To enable Amazon SES support you will need to pass your <code>AWSAccessKeyId</code> and <code>AWSSecretKey</code>.</p>

<ul>

<li><p>--amazon_ses_AWSAccessKeyId</p>

<p>Your AWSAccessKeyId</p>

</li>
<li><p>--amazon_ses_AWSSecretKey</p>

<p>Your AWSSecretKey</p>

</li>
<li><p>--amazon_ses_AWS_endpoint</p>

<p>Optionally, you may set the AWS Endpoint. Available endpoints are listed here:</p>

<p><a href="http://docs.aws.amazon.com/ses/latest/DeveloperGuide/regions.html">http://docs.aws.amazon.com/ses/latest/DeveloperGuide/regions.html</a></p>

<p><code>us-east</code> is used by default - use the full URL listed when setting the region</p>

</li>
<li><p>--amazon_ses_Allowed_Sending_Quota_Percentage</p>

<p>Dada Mail can be configured to use all, or only part of your total Amazon SES quota. Setting this paramater will allow you to set that amount. For example, to allow Dada Mail to use only 50% of your total SES sending quota, set this paramater to the following:</p>

<pre><code>    --amazon_ses_Allowed_Sending_Quota_Percentage 50</code></pre>

</li>
</ul>

<h1 id="Examples">Examples</h1>

<p>An example of invoking the installer with the above parameters:</p>

<pre><code>    ./install.cgi --program_url http://example.com/cgi-bin/dada/mail.cgi \
    --dada_root_pass secret \
    --dada_files_loc /home/example \
    --support_files_dir_path /home/example/public_html \
    --support_files_dir_url http://example.com \
    --backend mysql \
    --sql_server localhost \
    --sql_port 3306 \
    --sql_database dada_mail \
    --sql_username username \
    --sql_password password \
    --install_plugins mailing_monitor \
    --install_plugins change_root_password \
    --install_plugins screen_cache \
    --install_plugins log_viewer \
    --install_plugins tracker \
    --install_plugins multiple_subscribe \
    --install_plugins blog_index \
    --install_plugins change_list_shortname \
    --install_wysiwyg_editors ckeditor \
    --wysiwyg_editor_install_ckeditor \
    --wysiwyg_editor_install_tiny_mce \
    --file_browser kcfinder</code></pre>

<p>Since the list of options is so long, it may make sense to put the entire command w/options in its own file, so that you can resuse your own recipe for installing Dada Mail in multiple locations.</p>

<h1 id="Upgrading">Upgrading</h1>

<p>If you are using the installer to upgrade from an install of dada mail you&#39;ve installed beforeusing the installer, you may simply pass the,</p>

<pre><code>        --dada_files_loc
                </code></pre>

<p>flag, as well as the,</p>

<pre><code>        --upgrading
        </code></pre>

<p>parameter, and the installer will install Dada Mail, based on the previous values in your global configuration.</p>

<p>You may then pass <i>additional</i> parameters, to augment the previous configuration.</p>

<p>For example:</p>

<pre><code>        ./install.cgi --dada_files_loc /home/account --upgrading
        </code></pre>

<p>Will upgrade Dada Mail, pulling the previous global config values,</p>

<pre><code>        ./install.cgi --dada_files_loc /home/account --upgrading \
    --install_wysiwyg_editors ckeditor,tiny_mce \
        --install_plugins mailing_monitor,change_root_password,screen_cache
        </code></pre>

<p>Will upgrade Dada Mail, pulling the previous global config values, as well as making sure CKeditor and TinyMCE is installed, and the three plugins listed are also installed.</p>

<p>You CANNOT use the, <code>--dada_files_dir_setup</code> parameter with the, <code>--upgrading</code> parameter. You must explicitly set the, <code>--dada_files_loc</code>.</p>

<p>If performing an partial upgrade or doing some of your installation manually, you can tell Dada Mail to skip some of the tests it would usually preform, before configuring Dada Mail:</p>

<ul>

<li><p>--dada_files_dir_setup</p>

<p>If you pass this parameter with a value of, &quot;auto&quot;, you do not need to pass the, &quot;--dada_files_loc&quot; parameter provided that you&#39;re certain that the directory it automatically discovers to create the, &quot;.dada_files&quot; directory structure will be correct. The installer usually guesses the home directory.</p>

</li>
<li><p>--skip_configure_SQL</p>

<p>By default, the installer will make sure the database you pass in, &quot;--sql_database&quot; doesn&#39;t already have the tables required for a Dada Mail install. If you&#39;ve already set up these tables (for example, in a previous version of Dada Mail) pass this parameter with a value of, &quot;1&quot; to simply use the sql_* parameters you&#39;re passing, without attempting to set up the database, itself.</p>

</li>
<li><p>--if_dada_files_already_exists</p>

<p>If you pass, <code>keep_dir_create_new_config</code>, the installer will install Dada Mail, even if a already-existing, <code>.dada_files</code> directory is found.</p>

<p>If you pass this parameter, <code>skip_configure_dada_files</code>, NO other parameter is really required, except, <code>--dada_files_loc</code>, provided that the directory you pass in that parameter has an already-set up <code>.dada_files</code> directory, including a valid <code>.dada_config</code> file. When passing this parameter, this script will simply change the, &quot;dada/DADA/Config.pm&quot; file to point to the already-created <code>.dada_files</code> directory.</p>

</li>
</ul>

<h1 id="Other-Paramaters">Other Paramaters</h1>

<h2 id="help">--help</h2>

<p>Displays this help doc. Use:</p>

<pre><code>    ./install.cgi | less 
                </code></pre>

<p>(or something similar) so that the script doesn&#39;t zoom to the end.</p>

<h1 id="Bugs">Bugs</h1>

<p>Please file any problems at:</p>

<p><a href="https://github.com/justingit/dada-mail/issues">https://github.com/justingit/dada-mail/issues</a></p>


</body>

</html>


